\section{Kombinatorika}
\subsection{Osnovna načela kombinatorike}
\begin{trditev}[Načelo produkta]
    Če sta $A, B$ končni množici, potem je $$|A \times B| = |A| \cdot |B|.$$
\end{trditev}

\begin{trditev}[Posplošeno načelo produkta]
    Če so $A_1, \ldots, A_k$ končne, potem je $$|\Pi_{i=1}^k A_i| = \Pi_{i=1}^k |A_i|.$$
\end{trditev}

\begin{trditev}[Načelo vsote]
    Če sta $A$ in $B$ končni in disjunktni množici, potem je $$|A \cup B| = |A| + |B|.$$
\end{trditev}

\begin{trditev}[Posplošeno načelo vsote]
    Če so $A_1, \ldots, A_k$ končne, paroma disjunktne množice, potem je $$\bigcup_{i=1}^k A_i = \sum_{i=1}^{k} |A_i|.$$
\end{trditev}

\begin{trditev}[Načelo enakosti]
    Če obstaja bijekcija $A \to B$, potem je $$|A|=|B|.$$
\end{trditev}

Označimo z $[k] = \set{1, 2, \ldots, k}$.

\begin{primer}
    Naj bo $A$ končna množica, $|A| = n$, $A = \set{a_1, a_2, \ldots, a_n}$. Naj bo $2^A$ potenčna množica. Določi moč $2^A$.
\end{primer}

\begin{trditev}[Načelo dvojnega preštevanja]
    Z njim pokažemo, da sta dva izraza/formuli enaka, če z obema na različna načina preštejemo elemente iste množice.
\end{trditev}

\begin{primer}[Eulorjeva funkcija $\phi$]
    Za $n \in \N$ definiramo $\phi(n) = \text{število števil iz } [n], \text{ ki so tuji z } n.$ Določi $\sum_{d | n} \phi(d)$.
\end{primer}

\begin{trditev}[Dirichletovo načelo]
    Če sta $n, m \in \N$ in je $n > m$, potem ne obstaja injektivna preslikava $[n] \to [m]$.
\end{trditev}

\begin{opomba}[Kombinatorična interpretacija]
    Če $n$ predmetov razporedimo v $m$ predalov in je $n > m$, potem sta vsaj v enem predalu vsaj dva predmeta.
\end{opomba}

\begin{primer}
    Naj bo $X \subset [100], \ |X|=10$. Pokaži, da $X$ vsebuje dve disjunktni podmnožici z isto vsoto.
\end{primer}

\subsection{Število preslikav}
\begin{definicija}
    Množica $B^A = \set{f: A \to B}$ je \emph{množica vseh preslikav iz $A$ v $B$}.
\end{definicija}

\begin{definicija} Definiramo:
    \begin{itemize}
        \item $n^{\underline{k}} = \underbrace{n(n-1) \ldots (n-k+1)}_\text{$k$ faktorjev}$ je \emph{padajoča potenca.}
        \item $n^{\overline{k}} = n(n+1) \ldots (n+k-1)$ je \emph{naraščajoča potenca.}
        \item $n! = ^{\underline{n}}$ je \emph{$n$ fakulteta}.
        \item Množica z $n$ elementi se imenuje \emph{$n$-množica.}
    \end{itemize}
\end{definicija}

\begin{trditev}
    Naj bosta $N$ in $K$ končni množici z $|N| = n, \ |K| = k$. Tedaj velja:
    \begin{enumerate}
        \item $|K^N| = k^n$.
        \item Število injektivnih preslikav iz $N$ v $K$ je $k^{\underline{n}}$.
        \item Število bijekcij iz $N$ v $K$ je $n!$, če $n = k$ in je $0$ sicer.
    \end{enumerate} 
\end{trditev}

\begin{proof}
    Za 1. in 2. točko uporabimo načelo enakosti. V 3. točki upoštevamo, kadar je preslikava iz končne množice v končno množico bijektivna.
\end{proof}

\newpage
\subsection{Binomski koeficienti in binomski izrek}
\begin{definicija}
    Naj bo $x \in \C$. Naj bo $k \in \N_0 = \set{1, 2, \ldots}$. Definiramo $\binom{x}{k} = \frac{x^{\underline{k}}}{k!} = \frac{x(x-1)\ldots (x-k+1)}{k!}$. 
    
    Števila $\binom{x}{k}$ so \emph{binomski koeficienti.}
    Če je $k \notin \N_0$ definiramo $\binom{x}{k} = 0$.
\end{definicija}

\begin{trditev}
    Če je $n \in \N_0$ in $k \leq n, \ k \in \N_0$, potem je 
    $$\binom{n}{k} = \frac{n!}{k!(n-k)!}.$$

    Števila $\binom{n}{k}$ so \emph{binomska števila.}
\end{trditev}

\begin{proof}
    Definicija binomskega koeficienta.
\end{proof}

\begin{opomba}
    Tudi $\binom{0}{0} = 1$. Razlaga: $0! = 1$ je število bijektivnih preslikav iz $\emptyset$ v $\emptyset$.
\end{opomba}

\begin{opomba}
    Če je $0 \leq k \leq n$, potem $\binom{n}{k} = \binom{n}{n-k}$.
\end{opomba}

\begin{definicija}
    Naj bo $N$ množica. Definiramo $\binom{N}{k} = \setb{A \in P(N)}{|A| = k}$.
\end{definicija}

\begin{trditev}
    Če je $N$ $n$-množica in je $0 \leq k \leq n$, potem je 
    $$\left| \binom{N}{k} \right| = \binom{n}{k}.$$
\end{trditev}

\begin{proof}
    Definiramo $X = \set{(n_1, n_2, \ldots, n_k); \ n_i \in \N \text{ paroma različni}}$. Označimo $X_{n,k} = \left| \binom{N}{k} \right|$. Preštejemo elementi množici $X$ na 2 načina.
\end{proof}

\begin{trditev}
    Za $n \in \N$ in $1 \leq k \leq n$ velja:
    $$\binom{n}{k} = \binom{n-1}{k-1} + \binom{n-1}{k}.$$
\end{trditev}

\begin{proof}
    Naj bo $N$ $n$-množica. Naj bo $x \in N$ poljuben fiksen element. 
    
    Definiramo $\mathcal{A} = \set{A \in \binom{N}{k}; \ x \in A}$ in $\mathcal{B} = \set{B \in \binom{N}{k}; \ x \notin B}$. Potem $\binom{N}{k} = \mathcal{A} \cup \mathcal{B}$. Uporabimo prejšnjo trditev in načelo vsote.
\end{proof}

\begin{definicija} 
    \emph{Pascalov trikotnik} je trikotnik oblike
    \[
    \setcounter{MaxMatrixCols}{20}   
    \begin{matrix}
        &&&&& 1 \\
        &&&& 1 && 1 \\
        &&& 1 && 2 && 1 \\
        && 1 && 3 && 3 && 1 \\
        & 1 && 4 && 6 && 4 && 1 \\
        1 && 5 && 10 && 10 && 5 && 1 

    \end{matrix}
    \]
\end{definicija}

\begin{opomba}
    S pomočjo Paskalovega trikotnika se lahko spomnimo rekurzivno formulo za $\binom{n}{k}$ ($n$ je številka vrstice, $k$ je številka diagonale, ki jo gledamo z leve proti desni). Šteteti vrstice in diagonale začnemo z $0$.
\end{opomba}

\begin{izrek}[Binomski izrek]
    Za vsak $n \in \N_0$ velja:
    $$(a+b)^n = \sum_{k=0}^{n} \binom{n}{k}a^kb^{n-k}.$$
\end{izrek}

\begin{proof}
    Izberimo $k$-krat $a$ izmed $n$ oklepajev.
\end{proof}

\begin{opomba}
    V izreku sta $a$ in $b$ elementi poljubnega komutativnega kolobarja.
\end{opomba}

\newpage
\subsection{Izbori}
Naj bo $N$ $n$-mnižica. Opazujemo izbori $k$-elementov.
\begin{enumerate}
    \item Izbor je urejen (važno v kakšnem vrstnem redu izberimo elementi):
    \begin{enumerate}
        \item Elementi si lahko ponavljajo: $n^k$.
        \item Elementi se ne smejo ponavljati: $n^{\underline{k}}$.
    \end{enumerate}
    \item Izbor je neurejen:
    \begin{enumerate}
        \item Elementi si lahko ponavljajo [trditev]: $\binom{n+k-1}{k}$.
        \item Elementi se ne smejo ponavljati: $\binom{n}{k}$.
    \end{enumerate}
\end{enumerate}

\begin{trditev}
    Število neurejenih izborov s ponavljanjem dolžine $k$ iz $n$-množice $N$ je 
    $$\binom{n+k-1}{k}.$$
\end{trditev}

\begin{proof}
    Naj bo $N = \set{x_1, x_2, \ldots, x_n}$. 
    
    Neurejenemu izboru $\underbrace{x_1\ldots x_1}_{k_1} \underbrace{x_2 \ldots x_2}_{k_2} \ldots \underbrace{x_n \ldots x_n}_{k_n}$ priredimo niz $\underbrace{1 \ldots 1}_{k_1} 0 \underbrace{1 \ldots 1}_{k_2} 0 \ldots 0 \underbrace{1 \ldots 1}_{k_n}$.
\end{proof}

\subsection{Permutacije in permutacije s ponavljanjem}
\begin{definicija}
    Naj bo $A$ $n$-množica. \emph{Permutacija množice $A$} je bijektivna preslikava $\pi: A \to A$.

    Množico vseh permutacij velikosti $n$ (permutacij na $[n]$) označimo z $S_n$. 
    Množico vseh permutacij množice $A$ označimo z $S_A$.
\end{definicija}

\begin{trditev}
    $|S_n| = n!$.
\end{trditev}

\begin{proof}
    Z indukcijo pokažemo, da je $|S_n| = n|S_{n-1}|$ in $|S_1| = 1$.
\end{proof}

\begin{trditev}
    Vsako permutacijo lahko zapišemo kot produkt disjunknih ciklov.
\end{trditev}

\begin{definicija}
    Naj bo $\pi \in S_n$. Par je \emph{inverzija}, če velja: $i < j$ in $\pi(i) > \pi(j)$.
\end{definicija}

\begin{definicija}
    Permutacija $\pi \in S_n$ je \emph{soda} (oz. \emph{liha}), če ima sodo mnogo inverzij (oz. liho mnogo inverzij).
\end{definicija}

\subsubsection{Multimnožice}
\begin{definicija}
    \emph{Multimnožica z elementi v množici $S$} je preslikava $\mu: S \to \N_0$. Pri tem številu $\mu(a), a \in S$, rečemo \emph{kratnost elementa $a$ v multimnožici $\mu$}, vsoti $\sum_{a \in S} \mu(a)$ pa \emph{moč multimnožice $\mu$}. Multimnožica je \emph{končna}, če je njena moč končna.
\end{definicija}

\begin{opomba}
    Multimnožico $M$ formalno podamo z urejenim parom $(S, \mu)$. Namesto da elemente zapišemo večkrat, lahko kratnost označimo tudi s formalno potenco: $M = \set{a, a, b, c, c, c} = \set{a^2, b, c^3}$.

    Multimnožica je isto kot neurejen izbor s ponavljanjem. Tojer obstaja $\binom{n+k-1}{k}$ $k$-elementnih multimnožic v množici z $n$ elementi.
\end{opomba}

\subsubsection{Permutacije multimnožic}
Permutacija multimnožice $M = (S, \mu)$ moči $n$ je zaporedje $(x_1, \ldots, x_n)$, kjer je $x_i \in S$ in se vsak $a \in S$ v zaporedju pojavi $\mu(a)$-krat.

\begin{trditev}
    Število permutacij multimnožice $M=\set{1^{\alpha_1}, 2^{\alpha_2}, \ldots, k^{\alpha_k}}$ moči $n = \alpha_1 + \ldots + \alpha_k$ je 
    $$\frac{n!}{\alpha_1!\alpha_2!\ldots\alpha_k!}.$$
\end{trditev}

\begin{proof}
    Najprej izberimo položaje elementa 1, nato izberimo položaje elementa 2 itd.
\end{proof}

\begin{definicija}
    Številu $\frac{n!}{\alpha_1! \alpha_2! \ldots \alpha_k!}$ rečemo \emph{multinomski koeficient} in ga označimo z $\binom{n}{\alpha_1, \alpha_2, \ldots, \alpha_k}$.
\end{definicija}

\begin{opomba}
    Multinomski koeficient je posplošitev binomskega koeficienta.
\end{opomba}

\begin{trditev}[Multinomski izrek]
    Velja 
    $$(x_1 + \ldots + x_k)^n = \sum \binom{n}{\alpha_1, \alpha_2, \ldots, \alpha_k}x_1^{\alpha_1} \ldots x_k^{\alpha_k},$$
    kjer vsota teče po vseh izbirah naravnih števil $\alpha_1, \ldots, \alpha_k$, katerih vsota je $n$.
\end{trditev}

\begin{proof}
    Število permutacij multimnožice moči $n$, kjer je $S$ množica indeksov.
\end{proof}

\subsection{Kompozicije naravnega števila}
\begin{definicija}
    \emph{Kompožicija naravnega števila $n$} je zaporedje pozitivnih naravnih števil $\lambda = (\lambda_1, \ldots, \lambda_l)$, za katero velja $\lambda_1 + \ldots + \lambda_l = n$. \emph{Dolžina} kompozicije $\lambda$, $l(\lambda)$ je število elemetnov zaporedja, številu $n$ pa rečemo \emph{velikost kompozicije}. Števila $\lambda_1, \ldots, \lambda_l$ imenujemo \emph{členi kompozicije}.
\end{definicija}

\begin{trditev}
    Naj bo $n \geq 1$.
    \begin{enumerate}
        \item Število kompožicij števila $n$ je enako $2^{n-1}$.
        \item Število kompožicij dolžine $k$ števila $n$ je enako $\binom{n-1}{k-1}$.
    \end{enumerate}
\end{trditev}

\begin{proof}
    Število $n$ lahko si predstavljamo kot zaporedje $n$ kgoglic, kompozicijo pa s pregradami med kroglicami: $\bullet~|~\bullet~\bullet~|~\bullet$.
\end{proof}

\begin{opomba}
    Lahko razumemo kompozicijo števila $n$ s $k$ členi kot rešitev enačbe $x_1 + \ldots + x_k = n$, kjer so $x_i \in \N$.
\end{opomba}

\subsubsection{Šibke kompozicije}
\emph{Šibka kompozicija števila $n$} ima isto definicijo kot kompozicija, le da dovolimo med členi tudi ničle.

\begin{trditev}
    Število šibkih kompozicij števila $n$ s $k$ členi je $\binom{n+k-1}{k-1} = \binom{n+k-1}{n}$.
\end{trditev}

\begin{proof}
    1. način. Rešujemo enačbo $x_1 + \ldots + x_k = n$, kjer so $x_i \in \N_0$.

    2. način. Kroglice in pregrade.

    3. način. Neurejeni izbori s ponavljanjem.
\end{proof}

\subsection{Razčlenitve naravnega števila}
\begin{definicija}
    \emph{Razčlenitev naravnega števila $n$} je zaporedoje pozitivnih naravnih števil $\lambda = (\lambda_1, \ldots, \lambda_l)$, kjer je $\lambda_1 \geq \ldots \lambda_l$ in $\lambda_1 + \ldots + \lambda_l = n$. \emph{Dolžina} razčlenitve $\lambda$, $l(\lambda)$ je število elemetnov zaporedja, številu $n$ pa rečemo \emph{velikost razčlenitve}. Števila $\lambda_1, \ldots, \lambda_l$ imenujemo \emph{členi razčlenitve}. Razčlenitvam rečemo tudi \emph{particije}.
\end{definicija}

\begin{definicija}
    Naj bo $\lambda = (\lambda_1, \ldots, \lambda_l)$ račlenitev naravnega števila $n$. \emph{Ferrersov diagram $\lambda$} je seznam vrstic oblike:
    \begin{align*}
        \text{1. vrsta: } &\underbrace{\circ \ \circ \ \circ \ \ldots \ \circ}_{\lambda_1 \text{ krožcev}} \\
        \text{2. vrsta: } &\underbrace{\circ \ \circ \ \ldots \ \circ}_{\lambda_2 \text{ krožcev}} \\
        &\vdots \\
        \text{k. vrsta: } &\underbrace{\circ \ \ldots \ \circ}_{\lambda_l \text{ krožcev}}
    \end{align*}
\end{definicija}

\begin{definicija}
    Naj bo $\lambda = (\lambda_1, \ldots, \lambda_l)$ račlenitev naravnega števila $n$. \emph{Konjugirana razčlenitev $\overline{\lambda}$} je razčlenitev, ki ima transponiran Ferrersov diagram.
\end{definicija}

Uvedemo oznake:
\begin{itemize}
    \item $p(n)$ je število razčlenitev števila $n$. Funkciji $p(n)$ rečemo tudi \emph{razčlenitvena funkcija}.
    \item $p_k(n)$ je število razčlenitev števila $n$ s $k$ členi.
    \item $\overline{p}_k(n)$ je število razčlenitev števila $n$ z največ $k$ členi.
\end{itemize}

\begin{trditev}
    Za naravni števili $n$ in $k$ velja:
    \begin{enumerate}
        \item $p_k(n) = p_{k-1}(n-1) + p_k(n-k)$.
        \item $p_k(n) = \overline{p}_k(n-k)$.
        \item $\overline{p}_k(n) = \overline{p}_{k-1}(n) + \overline{p}_k(n-k)$.
    \end{enumerate}
\end{trditev}

\begin{proof}
    Pomagamo si z Ferrersovim diagramom.
    \begin{enumerate}
        \item Razbijemo razčlinitve na tiste, ki vsebujejo $1$ in tiste, ki jo ne vsebujejo.
        \item Odštejemo od prvega stolpca $1$.
        \item Razčlenitev $n$ z največ $k$ členi ima bodisi natanko $k$ členov bodisi kvečjemi $k-1$ členov. \qedhere
    \end{enumerate}
\end{proof}

\subsection{Stirlingova števila I. vrste}
\begin{definicija}
    Naj bo $1 \leq k \leq n$. \emph{Stirlingovo število I. vrste $C(n,k)$} je število permutacij množice $[n]$, ki se zapišejo kot produkt $k$ disjunktnih ciklov.
    Velja: $C(n, 0) = 0, \ n > 0$ in $C(0,0) = 1$.
\end{definicija}

\begin{primer}
    Izračunaj $C(n,n), \ C(n, 1), \ C(4,2)$.
\end{primer}

\begin{trditev}
    Naj bo $1 \leq k \leq n$. Velja:
    $$C(n, k) = C(n-1, k-1) + (n-1)C(n-1, k).$$
\end{trditev}

\begin{proof}
    Permutacije $[n]$ s $k$ cikli razdelimo takole:
    \begin{enumerate}
        \item tiste, kjer je $n$ negibna točka in
        \item ostale. \qedhere
    \end{enumerate}
\end{proof}

Za izračun $C(n,k)$ lahko si pomagamo s Stirlingovo matriko I. vrste, ki jo dobimo s pomočjo rekurzivne zveze.

\begin{trditev}
    $x^{\overline{n}} = \sum_{k=0}^{\infty}C(n,k)x^k$.
\end{trditev}

\begin{proof}
    Indukcija po $n$.
\end{proof}

\begin{primer}
    Izračunaj $x^{\overline{4}}$.
\end{primer}

\subsection{Stirlingova števila II. vrste in Bellova števila}
\begin{definicija}
    \emph{Razdelitev množice $X$} je družina podmnožic $\set{X_i}_{i \in I}$ za katero velja:
    \begin{enumerate}
        \item $\bigcup_{i=I}X_i =X$,
        \item $X_i \cap X_j = \emptyset$ za vsaka $i,j \in I, \ i \neq j$.
    \end{enumerate}
\end{definicija}

\begin{definicija}
    Naj bo $1 \leq k \leq n$. \emph{Stirlingovo število II. vrste $S(n,k)$} je število razdelitev množice $[n]$ v $k$ nepraznih razredov. Velja: $S(n, 0) = 0, \ n > 0$ in $S(0,0) = 1$.
\end{definicija}

\begin{primer}
    Izračunaj $S(n, n), \ S(n, 1), \ S(n,2)$.
\end{primer}

\begin{definicija}
    \emph{Bellovo število $B(n) = \sum_{k=0}^{\infty} S(n,k)$} je število vseh razdelitev $n$-množice v neprazne razrede.
\end{definicija}

\begin{trditev}
    Naj bo $1 \leq k \leq n$. Velja:
    $$S(n,k) = S(n-1, k-1) + k S(n-1, k).$$
\end{trditev}

\begin{proof}
    Vzemimo množico $[n]$. Razdelitve v $k$ razredov razdelimo takole:
    \begin{enumerate}
        \item tiste, ki imajo $\set{n}$ kot samostojni del in
        \item ostale.
    \end{enumerate}
\end{proof}

Za izračun $S(n,k)$ lahko si pomagamo s Stirlingovo matriko II. vrste, ki jo dobimo s pomočjo rekurzivne zveze.

\begin{trditev}
    $x^n=\sum_{k=0}^{\infty} S(n,k) x^{\underline{k}}$.
\end{trditev}

\begin{proof}
    \textcolor{red}{TODO}
\end{proof}

\begin{opomba}
    Če dva polinoma stopnje $n$ ujemata v $n+1$ točk, potem sta enaka.
\end{opomba}

\begin{izrek}
    Število surjekcij iz $n$-množice v $k$-množico je enako 
    $$k! S(n,k).$$
\end{izrek}

\begin{proof}
    Vsaka surjekcija določa razdelitev $n$-množice v $k$ nepraznih razredov.
\end{proof}

\begin{trditev}
    $B(n+1) = \sum_{k=0}^{\infty} \binom{n}{k} B(k)$.
\end{trditev}

\begin{proof}
    \textcolor{red}{TODO}
\end{proof}

\begin{definicija}
    Naj bo $1 \leq k \leq n$. \emph{Lahovo število $L(n,k)$} je število razdelitev $n$-množice v $k$ linearno urejenih kosov.
\end{definicija}

\newpage
\subsection{Dvajnastera pot}
Naj bo $N$ $n$-množica (predmetov) in $K$ $k$-množica (predalov). 
Gledamo "`funkcijo"' $f: N \to K$, ki predmeti razporedi po predalih.

Imamo 12 možnosti: predmeti in predali lahko bodisi ločimo med seboj bodisi ne ločimo med seboj, funkcija lahko poljubna, inkjektivna (vsak predal ima kvečjemu 1 predmet) ali surjektivna (noben predal ni prazen).

\begin{izrek}[Dvajnastera pot]
    Velja:
    \begin{center}
        \begin{tabular}{ c | c | c | c }
            ločimo predmeti/predali & poljubna & injektivna  & surjektivna \\ 
            \hline
            DA/DA & $k^n$ & $k^{\underline{n}}$  & $k! S(n, k)$ \\ 
            \hline
            DA/NE & $\sum_{i \leq k} S(n, i)$ & $\begin{cases}
                1; &n \leq k \\
                0; &\text{sicer}
            \end{cases}$  & $S(n, k)$\\
            \hline 
            NE/DA & $\binom{n+k-1}{k-1}$ & $\begin{cases}
                \binom{k}{n}; &n \leq k \\
                0; &\text{sicer}
            \end{cases}$  & $\binom{n-1}{k-1}$ \\  
            \hline
            NE/NE & $\overline{p}_k(n)$ & $\begin{cases}
                1; &n \leq k \\
                0; &\text{sicer}
            \end{cases}$  & $p_k(n)$ 
        \end{tabular}
        \end{center}
\end{izrek}

\begin{proof}
    Uporabimo že znane rezultate (kompozicije, razčlenitve) itd.
\end{proof}

\subsection{Načelo vključitev in izključitev}
Recimo, da sta $A, B$ poljubni množici, potem $|A \cup B| = |A| + |B| - |A \cap B|$.
\begin{primer}
    Koliko so števil v $[30]$ ni tujih s $30$? Koliko so tujih?
\end{primer}

\begin{izrek}[Načelo vključitev in izključitev]
    Naj bo $A_1, \ldots, A_n$ množice. Velja: 
    $$\left| \bigcup_{i=1}^n A_i \right| = \sum_{j=1}^{n}(-1)^{j+1}\sigma_j,$$
    kjer je $\displaystyle \sigma_j = \sum_{I \in \binom{[n]}{j}} \left|\bigcap_{i \in I} A_i\right|$.
\end{izrek}

\begin{proof}
    Pokažemo, da če $x \in \bigcup_{i=1}^n A_i$, potem prispeva natanko $1$ k formuli.
\end{proof}

\begin{primer}
    Na koliko načinov lahko razporedimo $n$ označenih predmetov v $k$ označenih predalov, če je vsaj en predal prazen?
\end{primer}

\begin{posledica}
    Če je $X$ $N$-množica in so $A_1, \ldots, A_n \subset X$, potem je število elementov množice $X$, ki niso v nobeni izmed množic $A_1, \ldots, A_n$ enako 
    $$N + \sum_{j=1}^{n}(-1)^j \sigma_j.$$
\end{posledica}

\begin{definicija}
    \emph{Premestitev množice $[n]$} je permutacija $\pi \in S_n$ brez negibnih točk.
\end{definicija}

\begin{primer}
    Izračunaj število premestitev množice $[n]$.
\end{primer}

\begin{izrek}
    Če je $n = p_1^{e_1} \ldots p_r^{e^r}$ razcep $n \in \N$ na prafaktorji, potem je 
    $$\phi(n) = n(1 - \frac{a}{p_1}) \ldots (1 - \frac{1}{p_r}) \text{ (Eulorjeva funkcija)}.$$
\end{izrek}

\begin{proof}
    \textcolor{red}{TODO}
\end{proof}

\newpage
\subsection{Rekurzivne enačbe}
\begin{primer} 
    Na koliko načinov lahko prehodimo $n$ stopnic, če vsakič pregodimo $1$ ali $2$?
\end{primer}

\begin{primer}
    Koliko je dvojiških dreves s korenom z $n$ vozlišč?
\end{primer}

\begin{izrek}
    Naj bo zaporedje $(a_n)_{n \geq 0}$ podano takole:
    $$a_0 = b_0, \ a_1 = b_1, \ a_n = A a_{n-1} + B a_{n-2}, \ n \geq 2,$$
    kjer so $b_0, b_1, A, B$ fiksna števila. 
    Naj bosta $\alpha$ in $\beta$ korena \df{karakteristične enačbe} $x^2 = Ax + B$. Tedaj velja:
    \begin{enumerate}
        \item Če je $\alpha \neq \beta$, potem obstajata konstanti $K_1, K_2$, tako da je 
        $$a_n = K_1 \alpha^n + K_2 \beta^n.$$
        \item Če je $\alpha = \beta$, potem obstajata konstanti $K_1, K_2$, tako da je 
        $$a_n = (K_1 + K_2n) \alpha^n.$$     
    \end{enumerate}
\end{izrek}

\subsubsection*{Splošen primer}
Zaporedje $(a_n)_{n \geq 0}$ je podano takole:
\begin{enumerate}
    \item $a_0 = b_0, a_1 = b_1, \ldots, a_{d-1} = d _{d-1}$, kjer so $b_0, b_1, \ldots, b_{d-1}$ fiksna števila.
    \item $c_da_{n+d} + c_{d-1}a_{n+d-1} + \ldots + c_1 a _{n+1} + c_0 a_n = f(n) \ \textcolor{red}{(*)}$, kjer so $c_d, \ldots, c_0$ fiksna števila, $f(n): \N_0 \to \C$.
\end{enumerate}

\begin{definicija}
    \textcolor{red}{(*)} je \df{$d$-člena linearna rekurzija s konstantnimi koeficienti}. Če je $f(n) \equiv 0$, potem rečemo, da je rekurzija \textcolor{red}{(*)} \df{homogena}.
\end{definicija}

\subsubsection*{Kako rešemo homogeno rekurzijo?}
Zaporedja gledamo v prostoru $\C^{\N_0}$ vseh kompleksnih zaproedij. Naredimo vektorski prostor $(\C^{\N_0}, +, \cdot)$ na naraven način. Gledamo še prostor $\End(\C^{\N_0})$ in naredimo vektorski prostor $(\End(\C^{\N_0}), +, \circ)$.

Naj bo $E \in (\End(\C^{\N_0}))$, $E(a_0, a_1, a_2, \ldots) = (a_1, a_2, \ldots)$ (odrežemo prvi člen). BŠS: $c_d = 1$.
\begin{enumerate}
    \item Priredimo polinom: $Q(x) = x^d + c_{d-1}x^{d-1}+ \ldots + c_1x+c_0$.
    \item \textcolor{red}{\textbf{(!)}} Poglejmo $\ker Q(E)$:
    \begin{multline*}
        (a_n)_{n} \in \ker Q(E) \liff Q(E)((a_n)_n)= 0 \liff (E^d +c_{d-1}E^{d-1}+ \ldots + c_1 E +c_0 I)(a_n)_n = 0 \liff \\ \liff E^d(a_n)_n +c_{d-1}E^{d-1}(a_n)_n + \ldots +  c_1E(a_n)_n + c_0 I (a_n)_n = 0 \liff \\ \liff (a_d, a_{d+1}, \ldots) + c_{d-1}(a_{d-1}, a_d, \ldots) + \ldots + c_1(a_1, a_2, \ldots) + c_0 (a_0, a_1, \ldots) = 0 \liff \\ \liff (a_d +c_{d-1}a_{d-1} + \ldots + c_1a_1 + c_0a_0, \, a_{d+1}+c_{d-1}a_d + \ldots + c_1a_2 + c_0 a_1, \ldots) = 0 \liff (a_n)_n \text{ reši } \textcolor{red}{(*)}.
      \end{multline*}
      Torej splošne rešitve homogene enačbe so natanko elementi iz $\ker(Q(E))$.
      \item Polinom $Q(x)$ lahko zapišemo v obliki $Q(x) = (x-\lambda_1)^{s_1} \ldots (x-\lambda_k)^{s_k}$, potem       
      $$\ker Q(E) = \ker((E - \lambda_1I)^{s_1}) \oplus \ldots \oplus \ker((E - \lambda_kI)^{s_k}).$$
      Hočemo torej določiti $\ker ((E - \lambda I)^{s})$.
      \item Vemo: $\dim (\ker ((E - \lambda I)^{s})) = s$. Baza prostora je $(\lambda^n)_{n \geq 0}, (n\lambda^n)_{n \geq 0}, \ldots, (n^{s-1}\lambda^n)_{n \geq 0}$ (dokaz težek).
\end{enumerate}
\begin{izrek}
    $(a_n)_{n \geq 0} \in \ker ((E - \lambda I)^s) \liff a_n \text{ je oblike } a_n = P(n) \lambda^n$, kjer je $P(n)$ polinom stopnje kvečjemu $s-1$.
\end{izrek}

\begin{izrek}
    Splošna rešitev enačbe 
    $$c_da_{n+d} + c_{d-1}a_{n+d-1} + \ldots + c_1 a _{n+1} + c_0 a_n = 0$$
    je oblike 
    $$A_1(n) \lambda_1^n + \ldots + A_k(n) \lambda_k^n,$$
    kjer so $\lambda_i$ ničla karakterističnega polinoma kratnosti $s_i$, in je $A_i(n)$ polinom stopnje k večjemu $s_i - 1$ za vse $i \in [k]$.
\end{izrek}

\subsubsection*{Kako rešemo nehomogeno rekurzijo?}
Rešitev nehomogene enačbe 
$$c_da_{n+d} + c_{d-1}a_{n+d-1} + \ldots + c_1 a _{n+1} + c_0 a_n = f(n) \ \textcolor{red}{(*)}$$
je oblike 
$$z_n + b_n,$$
kjer je $z_n$ splošna rešitev ustrezne homogene enačbe in je $b_n$ neka partikularna rešitev enačbe \textcolor{red}{(*)}.

Pri tem $b_n$ praviloma iščemo z ustreznim nastavkom, pri čemer upoštevamo, da če je $f(n)$ aditivna, torej $$f(n)~=~f_1(n)~+~\ldots~+~f_t(n),$$ potem $b_n$ lahko dobimo kot vsoto partikularnih rešitev od $$c_da_{n+d} + c_{d-1}a_{n+d-1} + \ldots + c_1 a _{n+1} + c_0 a_n = f_i(n).$$

\begin{primer}
    Pri začetnih pogojah $a_0 = 0, \ a_1 = 1$, reši enačbo $a_n = 4a_{n-1} - 4a_{n-2} - 2n + 5 \cdot 3^n$.
\end{primer}

\subsection{Formalne potenčne vrste (Rodovne funkcije)}
\begin{definicija}
    Naj bo $a: \N \to \C$ zaporedje. Vrsta $\sum_{n \geq 0}a_n x^n$ je \df{formalna potenčna vrsta} zaporedja $a_n$.
\end{definicija}

\begin{definicija}
    Naj bo $(a_n)_n, \, (b_n)_n \in \C^{\N_0}$.
    \begin{itemize}
        \item $\sum_{n \geq 0}a_n x^n + \sum_{n \geq 0}b_n x^n = \sum_{n \geq 0}(a_n + b_n) x^n$.
        \item $\lambda \cdot \sum_{n \geq 0}a_n x^n = \sum_{n \geq 0}(\lambda a_n) x^n$.
        \item $(\sum_{n \geq 0}a_n x^n) \cdot (\sum_{n \geq 0}b_n x^n) = \sum_{n \geq 0}c_n x^n$, kjer $c_n = \sum_{k=0}^{n}a_kb_{n-k}$.
    \end{itemize}
\end{definicija}

\begin{opomba}
    Formalne potenčne vrste tvorijo algebro.
\end{opomba}

\begin{definicija}
    F.\ p.\ v.\ $A(x)$ je \df{obrnljiva}, če obstaja f.\ p.\ v.\ $B(x)$, da velja $A(x) \cdot B(x) = (1, 0, 0, \ldots)$.
\end{definicija}

\begin{trditev}
    Formalna potenčna vrsta $A(x)$ je obrnljiva natanko tedaj, ko $a_0 \neq 0$
\end{trditev}

\begin{proof}
    $(\lthen)$ Definicija množenja.

    $(\Leftarrow)$ Induktivno konstruiramo členi f.\ p.\ v.\ $B(x)$.
\end{proof}

\begin{definicija}
    Če je $(a_n)_n$ zaporedje, ki je rešitev nekega kombinatoričnega problema, potem $\sum_{n \geq 0}a_n x^n$ pravimo \df{rodovna funkcija}. Pišemo: $G(x) = \sum_{n \geq 0}a_n x^n$.
\end{definicija}

\begin{primer}
    Določi rodovno funkcijio Fibonaccijeva zaporedja.
\end{primer}

\begin{definicija}
    Naj bo $A(x) = \sum_{n \geq 0}a_n x^n$ f.\ p.\ v. \df{Odvod} f.\ p.\ v.\ je $A'(x) =  \sum_{n \geq 1}na_n x^{n-1} =  \sum_{n \geq 0}(n+1)a_n x^n$.
\end{definicija}

\begin{trditev}
    $(A(x) \cdot B(x))' = A'(x)B(x) + A(x)B'(x)$.
\end{trditev}

\begin{proof}
    Račun.
\end{proof}

\subsubsection*{Reševanje rekurzij z rodovnimi funkcijami}
\begin{primer}
    Naj bo $a_0 = 2, a_1 = 3, a_n = 2a_{n-1}-a_{n-2}, n \geq 2$. Določi splošno formulo za $a_n$.
\end{primer}
\paragraph{Koraki splošnega reševanja nekega kombinatoričnega problema}
\begin{enumerate}
    \item Rešitev problema zapišemo z rekurzivno enačbo.
    \item Zapišemo rodovno funkcijio zaporedja z pomočjo rekurzivne zveze.
    \item Z algebro nad rodovnimi funkcijami, rodovno funkcijo razvijemo v vrsto.
    \item Iz razvoja preberemo rešitev našega začetnega problema.
\end{enumerate}

\subsection{Catalanova števila}
Imejmo produkt $n$ števil $x_1x_2 \ldots x_n$. Na koliko načinov lahko izračunamo ta produkt, če po vrsti zmnožimo dve zaporedni števili in jih nadomestimo s produktom?

\begin{definicija}
    \df{Catalanovo število $C_n$} je število načinov, s katerimi lahko izračunamo produkt $x_1x_2 \ldots x_n$.
\end{definicija}

\begin{trditev}
    $C_n = \frac{1}{n+1} \binom{2n}{n}$.
\end{trditev}

\begin{proof}
    Rodovne funkcije.
\end{proof}
